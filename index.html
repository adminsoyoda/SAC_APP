<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>SAC Ventas</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <script src="public/html/plugins/jQuery/jQuery-2.1.4.min.js"></script>
    <script src="public/jquery/APP.js"></script>
    <script src="public/jquery/Sync.js"></script>
    <script src="cordova.js"></script>
<!--    <script src="public/jquery/geo.js"></script>
    <script src="public/jquery/maps/map.api.js"></script>
    <script src="public/jquery/maps/gmaps.js"></script>
    <script src="public/jquery/maps/gmaps.min.js"></script>-->
    <script src="public/jquery/devicepush.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            contentPage('pages/login.html');

        });

        var callbackFn = function(location) {
        alert('[js] BackgroundGeoLocation callback:  ' + location.latitude + ',' + location.longitude);
            backgroundGeoLocation.finish();
        };
 
        var failureFn = function(error) {
            console.log('BackgroundGeoLocation error');
        };


/*        var values={};
        var updateGPS=function(position){
              var coords=position.coords;
              values["latitude"]=(coords.latitude); 
              values["altitude"]=(coords.altitude);    
              values["longitude"]=(coords.longitude);      
              alert("lat: "+values["latitude"]+"; long: "+values["longitude"]+"; altit:"+values["altitude"]+"; Precisión: "+position.coords.accuracy+"; direcc: "+position.coords.heading);
          };
        var failgps=function(e){
                alert(e);
              };*/
        function testGPS(){


            cordova.plugins.diagnostic.isLocationEnabled(function(enabled){
    if(!enabled){
 devicePush.setPosition(true);
    }
            backgroundGeoLocation.configure(callbackFn, failureFn, {
        desiredAccuracy: 10,
        stationaryRadius: 20,
        distanceFilter: 30,
        debug: true, // <-- enable this hear sounds for background-geolocation life-cycle. 
        stopOnTerminate: false, // <-- enable this to clear background location settings when the app terminates 
    });
 backgroundGeoLocation.start();

},
function(error){
    alert(error);
});


    
    // Turn ON the background-geolocation system.  The user will be tracked whenever they suspend the app. 
    


   

    /*       try{

            cordova.plugins.diagnostic.isLocationEnabled(function(enabled){
    console.log("Location is " + (enabled ? "enabled" : "disabled"));
    if(!enabled){
        cordova.plugins.diagnostic.switchToLocationSettings();
    }

     if (navigator.geolocation) {

                navigator.geolocation.getCurrentPosition(
function(position){
 updateGPS(position);    
},failgps,{maximumAge:1000, timeout: 5000, enableHighAccuracy: true}
    );


    }

}, function(error){
    console.error("The following error occurred: "+error);
});


           
                   

                   
                       
                    
                
                

            }catch(e){
                alert(e);
            }*/





        }

        function testGPS2(){

        }
          /*
cordova.plugins.diagnostic.isLocationEnabled(function(enabled){
    console.log("Location is " + (enabled ? "enabled" : "disabled"));
    if(!enabled){
        cordova.plugins.diagnostic.switchToLocationSettings();


        GMaps.geolocate({
success: function(position){
var lt, ln;
//if (ruta.length == 0) {
lt = position.coords.latitude;  // guarda coords en lat y lng
ln = position.coords.longitude;
  alert("lat: "+lt+"; long: "+ln+"; altit:"+position.coords.altitude+"; Precisión: "+position.coords.accuracy+"; direcc: "+position.coords.heading);

/*}
else
{ lt = ruta[0][0]; ln = ruta[0][1];    }
map = new GMaps({  // muestra mapa centrado en coords [lat, lng]
el: '#map',
lat: lt,
lng: ln,
//setZoom: 8,
click: enlazarMarcador,
tap: enlazarMarcador
});
if (ruta.length > 0) {
map.addMarker({ lat: ruta[0][0], lng: ruta[0][1]});  // marcador en [lat, lng]
}
if (ruta.length > 1) {
for (i=1; i<ruta.length; i++) { muestra(ruta[i-1], ruta[i]); }
}
map.fitZoom();*/


/*},
error: function(error) { smoke.alert('Error en la Geolocalización: '+error.message); },
not_supported: function(){ smoke.alert("Su navegador no soporta geolocalización"); },
});


    }
}, function(error){
    console.error("The following error occurred: "+error);
});


          
}*/

        
    </script>
  </head>
  <body class="sidebar-mini skin-blue-light">
        <div id='sync_sys' style='display:none' ></div>

        <div id='loader_sys' style='display:none' >
            <div style="opacity:0.5; width:100%; height:100%; z-index:100000; position:absolute; background-color:#FFF; top:0px;">
            </div>
            <div style="position:absolute; width:100%; text-align:center; z-index:200000; top:10%;">
                <img src="public/images/loading.gif" style='left:50%; top:0px; width:100px;' />
            </div>
        </div>

        <div id="alert_sys" style='display:none'>
            <div style="opacity:0.4; width:100%; height:100%; z-index:100000; position:absolute; background-color:#000; top:0px;">
            </div>
            <div style="position:absolute; width:100%; text-align:center; z-index:4000000; top:0px;">
                <div class="modal-dialog" style="background-color:#FFF;">
                    <div class="modal-content" style="text-align:left;">
                        <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="alerta_cerrar()"><span aria-hidden="true">×</span></button>
                        <h5 class="modal-title"><div id='alert_titulo'></div></h5>
                        </div>
                        <div class="modal-body">
                        <p><div id='alert_mensaje'></div></p>
                        </div>
                        <div class="modal-footer">
                        <button id="alert_button" type="button" class="btn btn-primary"  onclick="alerta_cerrar()">Ok</button>
                        </div>
                    </div>
                </div>    
            </div>            
        </div>

        <div id='content_master'></div>
        <br/>
        <button type="button" onclick="testGPS()">test</button>
         <button type="button" onclick="testGPS2()">test2</button>
  </body>
</html>